<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include ('partials/_favicons') %>
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
      /* Tooltip container */
      .tooltip {
        position: relative;
        display: inline-block;
        border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
      }
      
      /* Tooltip text */
      .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: black;
        color: #fff;
        text-align: center;
        padding: 5px 0;
        border-radius: 6px;
       
        /* Position the tooltip text - see examples below! */
        position: absolute;
        z-index: 1;
      }
      
      /* Show the tooltip text when you mouse over the tooltip container */
      .tooltip:hover .tooltiptext {
        visibility: visible;
      }
      </style>

    <title>TinyApp! - Tiny URL listings</title>
  </head>

  <body>
    <%- include ('partials/_header') %>
    <div class="card text-left">
      <div class="card-header"></div>
      <div class="card-body">
        <h4 class="card-title">URL Info:</h4>
        <h5 class="card-title">Original URL: <%= longURL %></h5>
        
          <% if(locals.message) { %>
            <br><p class="h6 text-danger"><%= message %></p>
          <% } %>
          
        <p class="card-text">
          Tiny URL ID: <a href="http://localhost:8080/u/<%= id %>">http://localhost:8080/u/<%= id %></a>&nbsp;&nbsp;<i class="fa-solid fa-xl fa-copy" style="color:grey"></i>
        </p>
      </div>
      <div class="card-footer text-left">
        <!-- EDIT FORM HERE -->
        <h4>Change Destination URL:</h4>
        <form class="form-inline" method="POST" action="/urls/<%= id %>/update"><label for="longURL">URL: </label><input
          class="form-control"
          type="text"
          name="longURL"
          value ="<%= longURL %>"
          style="width: 300; margin: 1em; text-align:left"/></input><button type="submit" class="btn btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
          <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
        </svg> Update</button></form>
      </div>
      <div class="card-body"><p class="card-text">
      <h4 class="card-title">Analytics:</h4>
      <% if(locals.totalCount) { %><p><h5>Click Through Totals: <%= totalCount %></h5></p>
        <% } %>
      <p><h4><BR>Click Through Log:</h4></p>
      <table>
        <tr><td style="padding-right:25px"><h5>Date & Time (UTC)</h5></td><td><h5>User ID of Who Clicked:</h5></td></tr>
      <% for (let id in logs) { %>
        <tr><td style="padding-right:25px"><%= logs[id].dateStamp %></td><td><%= logs[id].uid %></td></tr>
      <% } %>
    </table>
    </p>
    </div>
    <!-- Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <%- include ('partials/_footer') %>
  </body>
</html>